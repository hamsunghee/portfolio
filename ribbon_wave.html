<!doctype html>
<html lang="ko">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ribbon Text Wave — Demo</title>
  <style>
    :root {
      --bg: #000;
      --ribbon: #0b0b0b;
      --text: #e6e6e6;
      --muted: #9b9b9b
    }

    html,
    body {
      height: 100%;
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: Inter, system-ui, -apple-system, "Noto Sans KR", sans-serif
    }

    .wrap {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center
    }

    .stage {
      width: 100%;
      max-width: 1400px;
      height: 70vh;
      position: relative;
      overflow: hidden
    }

    /* SVG fills the stage */
    svg {
      width: 100%;
      height: 100%;
      display: block
    }

    /* Ribbon look: a filled shape (the band) with text on top */
    .ribbon-fill {
      fill: var(--ribbon)
    }

    /* Text on path */
    text {
      font-weight: 600;
      letter-spacing: 0.02em;
      font-family: "Noto Sans KR", Arial, sans-serif
    }

    .ribbon-text {
      fill: var(--text);
      font-size: 48px
    }

    .ribbon-text--small {
      font-size: 18px;
      fill: var(--muted);
      font-weight: 500
    }

    /* subtle perspective by skewing the whole SVG group */
    .perspective {
      transform-origin: center;
      transform: rotateX(8deg) translateZ(0)
    }

    /* responsive sizes */
    @media (max-width:900px) {
      .ribbon-text {
        font-size: 28px
      }

      .ribbon-text--small {
        font-size: 12px
      }
    }

    /* small helper: show controls if needed */
    .info {
      position: absolute;
      left: 18px;
      top: 18px;
      color: var(--muted);
      font-size: 13px
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="stage">
      <div class="info">Demo — SVG ribbon with textPath (JS animation)</div>
      <svg viewBox="0 0 1400 700" preserveAspectRatio="xMidYMid slice" xmlns="http://www.w3.org/2000/svg"
        class="perspective" id="svgRoot">
        <defs>
          <!-- clip shape used to make the band thick by offsetting the center path -->
          <clipPath id="clip-1"></clipPath>
          <clipPath id="clip-2"></clipPath>
          <clipPath id="clip-3"></clipPath>

          <!-- reusable text string; change as you like -->
          <text id="sampleText" style="display:none">КOРОЧЕ • 18.08.19 • КOРОЧЕ • 18.08.19 •</text>
        </defs>

        <!-- 3 ribbons stacked with different amplitude, speed and offset -->
        <!-- Ribbon 1 -->
        <g id="ribbon1" transform="translate(0,120)">
          <path id="centerPath1" d="" stroke="none" fill="none" />
          <path class="ribbon-fill" id="band1" d="" />
          <text class="ribbon-text--small">
            <textPath id="tp1" href="#centerPath1" startOffset="0"></textPath>
          </text>
        </g>

        <!-- Ribbon 2 -->
        <g id="ribbon2" transform="translate(0,300)">
          <path id="centerPath2" d="" stroke="none" fill="none" />
          <path class="ribbon-fill" id="band2" d="" />
          <text class="ribbon-text">
            <textPath id="tp2" href="#centerPath2" startOffset="0"></textPath>
          </text>
        </g>

        <!-- Ribbon 3 -->
        <g id="ribbon3" transform="translate(0,460)">
          <path id="centerPath3" d="" stroke="none" fill="none" />
          <path class="ribbon-fill" id="band3" d="" />
          <text class="ribbon-text--small">
            <textPath id="tp3" href="#centerPath3" startOffset="0"></textPath>
          </text>
        </g>
      </svg>
    </div>
  </div>

  <script>
    // Parameters for each ribbon 두께 설정 
    const ribbons = [
      /*       { id: 1, amp: 70, freq: 0.0085, speed: 0.9, thickness: 70, y: 120, textScale: 0.6 },
            { id: 2, amp: 120, freq: 0.007, speed: 1.0, thickness: 110, y: 300, textScale: 1.0 },
            { id: 3, amp: 90, freq: 0.0095, speed: 0.75, thickness: 80, y: 460, textScale: 0.6 } */
      { id: 1, amp: 35, freq: 0.0085, speed: 0.9, thickness: 110, y: 120, textScale: 0.6 },
      { id: 2, amp: 55, freq: 0.007, speed: 1.0, thickness: 180, y: 300, textScale: 1.0 },
      { id: 3, amp: 40, freq: 0.0095, speed: 0.75, thickness: 130, y: 460, textScale: 0.6 }
    ];

    const width = 1400; // viewBox width
    const samples = 180; // number of sample points across the width

    // Base content for text; repeated so it fills the path
    const baseText = '  КОРОЧЕ  • 18.08.19  •  ';

    // create path string from sampled sine wave
    function makeCenterPath(amp, freq, phase, offsetY) {
      const step = width / samples;
      let d = '';
      for (let i = 0; i <= samples; i++) {
        const x = i * step;
        const y = Math.sin((x * freq) + phase) * amp + offsetY;
        if (i === 0) d += `M ${x.toFixed(2)} ${y.toFixed(2)}`;
        else d += ` L ${x.toFixed(2)} ${y.toFixed(2)}`;
      }
      return d;
    }

    // create band polygon by offsetting center path up and down to create a thick ribbon
    function makeBandPath(centerPoints, thickness) {
      // centerPoints: array of {x,y}
      // compute normals and offset
      const top = [];
      const bottom = [];
      for (let i = 0; i < centerPoints.length; i++) {
        const p = centerPoints[i];
        // compute tangent using neighbors
        const prev = centerPoints[Math.max(0, i - 1)];
        const next = centerPoints[Math.min(centerPoints.length - 1, i + 1)];
        const tx = next.x - prev.x;
        const ty = next.y - prev.y;
        // normal
        const len = Math.hypot(tx, ty) || 1;
        const nx = -ty / len;
        const ny = tx / len;
        // offset half thickness
        top.push({ x: p.x + nx * (thickness / 2), y: p.y + ny * (thickness / 2) });
        bottom.push({ x: p.x - nx * (thickness / 2), y: p.y - ny * (thickness / 2) });
      }
      // build path: top forward, bottom reversed
      let d = '';
      for (let i = 0; i < top.length; i++) {
        const pt = top[i];
        d += (i === 0 ? `M ${pt.x.toFixed(2)} ${pt.y.toFixed(2)}` : ` L ${pt.x.toFixed(2)} ${pt.y.toFixed(2)}`);
      }
      for (let i = bottom.length - 1; i >= 0; i--) {
        const pt = bottom[i];
        d += ` L ${pt.x.toFixed(2)} ${pt.y.toFixed(2)}`;
      }
      d += ' Z';
      return d;
    }

    // helper: sample center path into points array
    function sampleCenterPoints(amp, freq, phase, offsetY) {
      const pts = [];
      for (let i = 0; i <= samples; i++) {
        const x = (i * width) / samples;
        const y = Math.sin((x * freq) + phase) * amp + offsetY;
        pts.push({ x, y });
      }
      return pts;
    }

    // animate
    let t = 0;
    function render() {
      t += 0.016; // approx seconds
      ribbons.forEach((r, i) => {
        const phase = t * r.speed * 2.0;
        const centerD = makeCenterPath(r.amp, r.freq, phase, 0);
        // set center path
        const centerPath = document.getElementById('centerPath' + r.id);
        centerPath.setAttribute('d', centerD);

        // sample points to make band
        const pts = sampleCenterPoints(r.amp, r.freq, phase, 0);
        const bandD = makeBandPath(pts, r.thickness);
        const band = document.getElementById('band' + r.id);
        band.setAttribute('d', bandD);
        band.setAttribute('fill', 'black');

        // apply slight gradient by adjusting opacity per ribbon
        band.setAttribute('opacity', 1 - (i * 0.06));

        // repeat text so it fills width
        const tp = document.getElementById('tp' + r.id);
        // create a long repeated string scaled by textScale
        let repeats = Math.ceil((width / 200) * (1 / r.textScale) * 3);
        let txt = baseText.repeat(repeats);
        tp.textContent = txt;

        // animate text startOffset to create scrolling effect
        const offset = ((t * 80 * r.speed) % (baseText.length * 14));
        tp.setAttribute('startOffset', offset);
      });

      requestAnimationFrame(render);
    }

    // initial render and start loop
    render();

    // responsiveness: on resize, you may want to adjust viewBox width/height; for simplicity we keep fixed viewBox.
  </script>
</body>

</html>